üé∂ Online Music Library API
===========================

üìã –û–ø–∏—Å–∞–Ω–∏–µ
-----------

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –ø–µ—Å–µ–Ω. API –ø–æ–∑–≤–æ–ª—è–µ—Ç:

-   –î–æ–±–∞–≤–ª—è—Ç—å –ø–µ—Å–Ω–∏.
-   –£–¥–∞–ª—è—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Å–Ω—è—Ö.
-   –ü–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Å–µ–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
-   –ü–æ–ª—É—á–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –∫—É–ø–ª–µ—Ç–∞–º.

API —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Å–Ω–µ, —Ç–∞–∫–æ–π –∫–∞–∫ –¥–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞, —Ç–µ–∫—Å—Ç –∏ —Å—Å—ã–ª–∫–∞.

* * * * *

üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
-------------

1.  **REST API –º–µ—Ç–æ–¥—ã:**
    -   –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–µ—Å–µ–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø–æ–ª—è–º –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
    -   –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Å–Ω–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –ø–æ –∫—É–ø–ª–µ—Ç–∞–º.
    -   –£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Å–Ω–∏.
    -   –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Å–Ω–∏.
    -   –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø–µ—Å–Ω–∏.
2.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º API:**
    -   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Å–Ω—è—Ö —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API.
3.  **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
    -   –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.
4.  **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
    -   –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —É—Ä–æ–≤–Ω—è–º–∏ `debug` –∏ `info`.
5.  **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
    -   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª.
6.  **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
    -   Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (OpenAPI 3.0.3) –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ API.

* * * * *

üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
--------------

-   **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:** Go (Golang)
-   **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:**
    -   `chi` --- –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è.
    -   `gorm` --- ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
    -   `zap` --- –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
    -   `swaggo/swag` --- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
-   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
-   **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** JSON

* * * * *

üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
---------------------

### 1\. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
-   **Go** (–≤–µ—Ä—Å–∏–∏ 1.19 –∏–ª–∏ –≤—ã—à–µ)
-   **PostgreSQL**

### 2\. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/lum8ere/TestTask_2
cd TestTask_2
```

### 3\. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
DB_URL=postgres://user:password@localhost:5432/musicdb
API_SERVER=http://localhost:9000
PORT=9000
```

### 4\. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
go run main.go
```
* * * * *

üìÑ –ú–µ—Ç–æ–¥—ã API
-------------

### 1\. **–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–µ—Å–µ–Ω**

```bash
GET /songs
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

-   `group` (query, optional) --- –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã.
-   `title` (query, optional) --- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏.
-   `page` (query, optional) --- –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1`).
-   `limit` (query, optional) --- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10`).

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```json
[
    {
        "id": 1,
        "group": "Muse",
        "title": "Supermassive Black Hole",
        "release_date": "2006-07-16",
        "text": "Ooh baby, don't you know I suffer?...",
        "link": "https://www.youtube.com/watch?v=Xsp3_a-PMTw",
        "created_at": "2024-11-25T00:00:00Z",
        "updated_at": "2024-11-25T00:00:00Z"
    }
]
```
* * * * *

### 2\. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Å–Ω–∏**

```bash
GET /songs/{id}/text
```
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

-   `id` (path, required) --- ID –ø–µ—Å–Ω–∏.
-   `page` (query, required) --- –ù–æ–º–µ—Ä –∫—É–ø–ª–µ—Ç–∞.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```json
{
    "verse": "Ooh baby, don't you know I suffer?"
}
```

* * * * *

### 3\. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø–µ—Å–Ω–∏**

```bash
POST /songs
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
    "group": "Muse",
    "song": "Supermassive Black Hole"
}
```
**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```json
{
    "id": 1,
    "group": "Muse",
    "title": "Supermassive Black Hole",
    "release_date": "2006-07-16",
    "text": "Ooh baby, don't you know I suffer?...",
    "link": "https://www.youtube.com/watch?v=Xsp3_a-PMTw",
    "created_at": "2024-11-25T00:00:00Z",
    "updated_at": "2024-11-25T00:00:00Z"
}
```

* * * * *

### 4\. **–£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Å–Ω–∏**

```bash
DELETE /songs/{id}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

-   `id` (path, required) --- ID –ø–µ—Å–Ω–∏.

* * * * *

### 5\. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Å–Ω–∏**

```bash
`UT /songs/{id}
```
**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
    "group": "Muse",
    "title": "Supermassive Black Hole",
    "release_date": "2006-07-16",
    "text": "Updated lyrics...",
    "link": "https://new-link.com"
}
```

* * * * *

üõ†Ô∏è Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
------------------------

Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```bash
http://localhost:9000/swagger/index.html
```
* * * * *

üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è
--------------------------

1.  **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

    -   –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —É—Ä–æ–≤–Ω–∏ `debug` –∏ `info`.
    -   –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –∏ –æ—à–∏–±–æ–∫ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.
2.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**

    -   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è middleware –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –ø–∞–Ω–∏–∫ (try-catch), —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.
3.  **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**

    -   –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è 15 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–µ—Å–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.